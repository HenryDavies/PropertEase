"use strict";var googleMap=googleMap||{},google=google;googleMap.mapSetup=function(){var o=document.getElementById("map-canvas"),e={zoom:11,center:new google.maps.LatLng(51.50853,(-.12574)),mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(o,e),this.getProperties()},googleMap.getProperties=function(){$.get("http://localhost:3000/properties").done(this.loopThroughProperties)},googleMap.loopThroughProperties=function(o){console.log(o),$.each(o.properties,function(o,e){setTimeout(function(){console.log(o),googleMap.createMarkerForProperty(e)},500*o)})},googleMap.createMarkerForProperty=function(o){var e=new google.maps.LatLng(o.latitude,o.longitude),n=new google.maps.Marker({position:e,animation:google.maps.Animation.DROP,map:this.map});this.addInfoWindowForProperty(o,n)},googleMap.addInfoWindowForProperty=function(o,e){var n=this;google.maps.event.addListener(e,"click",function(){"undefined"!=typeof n.infoWindow&&n.infoWindow.close(),n.infoWindow=new google.maps.InfoWindow({content:"\n        <h4>"+o.num_bedrooms+" bed, "+o.num_bathrooms+" bath "+o.property_type+"</h4>\n        <p>"+o.displayable_address+"</p>\n        <p>Â£"+o.price+"</p>\n      "}),n.infoWindow.open(n.map,e)})},$(googleMap.mapSetup.bind(googleMap));